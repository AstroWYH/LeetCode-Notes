```cpp
#include <iostream>
using namespace std;

class Count {
public:
  Count() {
    count = 1;
  }
  void Increase() {
    count++;
  }
  void Decrease() {
    count--;
  }
  int GetCount() {
    return count;
  }
private:
  int count = 0;
};

template<typename T>
class SmartPtr {
public:
  SmartPtr() : ptr_(nullptr), count_(nullptr) {}
  explicit SmartPtr(T* ptr) : ptr_(ptr), count_(new Count()) {}
  
  ~SmartPtr() {
    if (count_ != nullptr) {
      count_->Decrease();
      if (count_->GetCount() == 0) {
        delete ptr_;
        delete count_;
        ptr_ = nullptr;
        count_ = nullptr;
      }
    }
  }
  
  SmartPtr(const SmartPtr<T>& other) {
    ptr_ = other.ptr_;
    count_ = other.count_;
    count_->Increase();
  }
  
  SmartPtr<T>& operator=(const SmartPtr<T>& other) {
    if (ptr_ == other.ptr_) {
      return *this;
    }
    ptr_ = other.ptr_;
    count_ = other.count_;
    count_->Increase();
    return *this;
  }
  
  T* get() {
    return ptr_;
  }
  
  T& operator*() {
    return *ptr_;
  }
  
  T* operator->() {
    return ptr_;
  }
  
  int GetCnt() {
    if (count_ == nullptr) return 0;
    return count_->GetCount();
  }
private:
  T* ptr_;
  Count* count_;
};

class Test {
  int a {23};
  string b {"asdf"};
};

int main()
{
  SmartPtr<Test> sp0;
  cout << "sp0: " << sp0.GetCnt() << endl;
  {
    SmartPtr<Test> sp1(new Test());
    cout << "sp1: " << sp1.GetCnt() << endl;
    SmartPtr<Test> sp2(sp1);
    cout << "sp2: " << sp2.GetCnt() << endl;
    sp0 = sp2;
    cout << "sp0: " << sp0.GetCnt() << endl;
  }
  cout << "sp0: "<< sp0.GetCnt() << endl;

  return 0;
}

// output
sp0: 0
sp1: 1
sp2: 2
sp0: 3
sp0: 1
```
