```cpp
#include <condition_variable>
#include <functional>
#include <iostream>
#include <mutex>
#include <queue>
#include <thread>
#include <vector>

using namespace std;

class ThreadPool {
 public:
  ThreadPool(int num_threads) : pool_(num_threads) {
    for (int i = 0; i < num_threads; i++) {
      AddThread();
    }
  }

  ~ThreadPool() {
    {
      unique_lock<mutex> lock(mutex_);
      stop_ = true;
    }

    cv_.notify_all();

    for (auto &thread : pool_) {
      if (thread.joinable()) {
        thread.join();
      }
    }
  }

  void AddThread() {
    pool_.emplace_back([this]() {
      while (true) {
        function<void()> task;
        {
          unique_lock<mutex> lock(mutex_);
          cv_.wait(lock, [this]() { return !tasks_.empty() || stop_; });

          if (stop_ && tasks_.empty()) {
            return;
          }

          task = move(tasks_.front());
          tasks_.pop();
        }

        task();
      }
    });
  }

  template <typename F, typename... Args>
  void Commit(F &&f, Args &&...args) {
    auto task = bind(forward<F>(f), forward<Args>(args)...);

    {
      unique_lock<mutex> lock(mutex_);
      tasks_.emplace(task);
    }

    cv_.notify_one();
  }

 private:
  vector<thread> pool_;
  queue<function<void()>> tasks_;
  mutex mutex_;
  condition_variable cv_;
  bool stop_ = false;
};

void Print(int num) {
  cout << "Thread ID: " << this_thread::get_id() << " -> " << num << endl;
}

int main() {
  ThreadPool pool(4);

  for (int i = 0; i < 8; i++) {
    pool.Commit(Print, i);
  }

  return 0;
}

// 执行结果
Thread ID: Thread ID: 51772 -> 3
Thread ID: 51772 -> 4
Thread ID: 51772 -> 5
Thread ID: 51772 -> 6
Thread ID: 51772 -> 7
Thread ID: 51436 -> 2
43884 -> 0
Thread ID: 45792 -> 1
```